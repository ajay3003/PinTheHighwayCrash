@using Microsoft.AspNetCore.Components.Routing
@using PinTheHighwayCrash.Models
@inject Microsoft.Extensions.Options.IOptions<FeatureFlags> Flags

<nav class="d-flex flex-column flex-shrink-0 p-3 bg-dark text-white min-vh-100 shadow-sm nav-menu">
    <!-- Brand -->
    <!-- Changed href="/" → href="" to respect <base href="/PinTheHighwayCrash/"> -->
    <a href="" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
        <span class="fs-4 fw-semibold">🚨 PinTheHighwayCrash</span>
    </a>
    <hr class="border-secondary" />

    <!-- Navigation links -->
    <ul class="nav nav-pills flex-column mb-auto">
        <li class="nav-item mb-1">
            <!-- Changed href="/" → href="" for correct project-base navigation -->
            <NavLink class="nav-link text-white d-flex align-items-center gap-2"
                     href="" Match="NavLinkMatch.All">
                <i class="bi bi-house-fill"></i> Home
            </NavLink>
        </li>

        <li class="nav-item mb-1">
            <NavLink class="nav-link text-white d-flex align-items-center gap-2"
                     href="report">
                <i class="bi bi-geo-alt-fill"></i> Report Crash
            </NavLink>
        </li>

        @if (Flags.Value.ShowHealthPage)
        {
            <li class="nav-item mb-1">
                <NavLink class="nav-link text-white d-flex align-items-center gap-2"
                         href="health">
                    <i class="bi bi-heart-pulse-fill"></i> Health Check
                </NavLink>
            </li>
        }

        @if (Flags.Value.ShowDebugPanel)
        {
            <li class="nav-item mb-1">
                <NavLink class="nav-link text-white d-flex align-items-center gap-2"
                         href="diag">
                    <i class="bi bi-wrench-adjustable-circle"></i> Diagnostics
                </NavLink>
            </li>
        }
    </ul>

    <hr class="border-secondary" />

    <!-- Footer -->
    <div class="text-muted small">
        <i class="bi bi-info-circle"></i> v1.0 beta
    </div>
</nav>
